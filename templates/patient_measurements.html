{% extends "base.html" %}

{% block title %}Пациент - Измерения{% endblock %}

{% block content %}
<div style="display: grid; grid-template-columns: 350px 1fr; gap: 20px;">
    <!-- Левая колонка - Форма -->
    <div>
        <div class="card">
            <h3>Новое измерение</h3>
            <form method="POST">
                <div class="form-group">
                    <label>Глюкоза (ммоль/л)</label>
                    <input type="number" step="0.1" name="glucose">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div class="form-group">
                        <label>Систолическое</label>
                        <input type="number" name="systolic_bp">
                    </div>
                    <div class="form-group">
                        <label>Диастолическое</label>
                        <input type="number" name="diastolic_bp">
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div class="form-group">
                        <label>Пульс</label>
                        <input type="number" name="pulse">
                    </div>
                    <div class="form-group">
                        <label>Вес (кг)</label>
                        <input type="number" step="0.1" name="weight">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Сохранить</button>
            </form>
        </div>
    </div>

    <!-- Правая колонка - История -->
    <div>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3>История измерений</h3>
            <span style="background: #f5f5f5; padding: 4px 12px; border: 1px solid #ddd;">Всего: {{ measurements|length }}</span>
        </div>

        <div class="table-responsive">
            <table>
                <thead>
                    <tr>
                        <th>Дата</th>
                        <th>Глюкоза</th>
                        <th>Давление</th>
                        <th>Пульс</th>
                        <th>Вес</th>
                    </tr>
                </thead>
                <tbody>
                    {% for m in measurements %}
                    <tr>
                        <td>{{ m.measured_at[:10] }}</td>
                        <td>{{ m.glucose or '-' }}</td>
                        <td>{{ m.systolic_bp }}/{{ m.diastolic_bp }}</td>
                        <td>{{ m.pulse or '-' }}</td>
                        <td>{{ m.weight or '-' }} кг</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<a href="{{ url_for('patient_dashboard') }}" class="btn btn-secondary" style="margin-top: 20px;">← Назад</a>
{% endblock %}